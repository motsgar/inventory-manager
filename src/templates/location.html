{% extends "layout.html" %}
<!-- styles -->

{% block head %}
<style>
    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1;
    }

    .popup {
        display: none;
        position: fixed;
        padding: 20px;
        border-radius: 5px;
        background-color: white;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 2;
    }
</style>
{% endblock %}


<!-- scripts -->

{% block scripts %}
<script>
    const openPopupButton = document.getElementById('openPopupButton');
    const closePopupButton = document.getElementById('closePopupButton');
    const popupForm = document.getElementById('newSublocationForm');
    const overlay = document.createElement('div');
    overlay.className = 'overlay';

    openPopupButton.addEventListener('click', () => {
        popupForm.style.display = 'block';
        document.body.appendChild(overlay);
    });

    closePopupButton.addEventListener('click', () => {
        popupForm.style.display = 'none';
        document.body.removeChild(overlay);
    });
</script>
{% endblock %}

<!-- body -->

{% block content%}

{% if not_found %}
<h1>Location not found</h1>
{% else %}
<h2>Current path: /{{path | join('/')}}</h2>
<h3>Location info</h3>
<p>{{ location_info }}</p>
<h3>Sublocations</h3>
<button id="openPopupButton">Create new sublocation</button>
{% if path | length > 0 %}
<a href="../">Go up a level</a>
{% endif %}
<ul>
    {% for sublocation in sublocations %}
    <li><a href="{{sublocation['name']}}">{{sublocation["name"]}}</a></li>
    {% endfor %}
</ul>
{% endif %}
<div id="newSublocationForm" class="popup">
    <form method="post">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
        <button type="submit">Create new sublocation</button>
    </form>
    <button id="closePopupButton">Close</button>
</div>
{% endblock %}